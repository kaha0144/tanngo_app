{% extends "base.html" %}
{% block content %}
<div class="container my-5">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2>ğŸ—‘ï¸ å‰Šé™¤æ¸ˆã¿ã®ãŠå•ã„åˆã‚ã›</h2>
    <a href="{{ url_for('admin_page') }}" class="btn btn-primary">ç®¡ç†è€…ãƒšãƒ¼ã‚¸ã«æˆ»ã‚‹</a>
  </div>

  {% if contact_msgs and contact_msgs|length > 0 %}
    <ul class="list-group">
      {% for msg in contact_msgs %}
        <li class="list-group-item">
          <div class="d-flex justify-content-between">
            <strong>{{ msg.user.nickname }} ({{ msg.user.username }})</strong>
            <small class="text-muted">{{ msg.timestamp.strftime('%Y-%m-%d %H:%M') }}</small>
          </div>
          <div class="mt-2">
            <strong>ä»¶å:</strong> {{ msg.subject }}<br>
            <strong>å†…å®¹:</strong>
            <p>{{ msg.body.replace('\n','<br>')|safe }}</p>
          </div>

          <div class="text-end mt-2">
            <form action="{{ url_for('restore_message', msg_id=msg.id) }}" method="post" onsubmit="return confirm('ã“ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å¾©å…ƒã—ã¾ã™ã‹ï¼Ÿ');">
              <button type="submit" class="btn btn-success btn-sm">å¾©å…ƒã™ã‚‹</button>
            </form>
          </div>
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <p class="text-muted">å‰Šé™¤ã•ã‚ŒãŸãŠå•ã„åˆã‚ã›ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</p>
  {% endif %}
</div>
{% endblock %}