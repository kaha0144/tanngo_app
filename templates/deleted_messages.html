{% extends "base.html" %}
{% block content %}
<div class="container my-5">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2>🗑️ 削除済みのお問い合わせ</h2>
    <a href="{{ url_for('admin_page') }}" class="btn btn-primary">管理者ページに戻る</a>
  </div>

  {% if contact_msgs and contact_msgs|length > 0 %}
    <ul class="list-group">
      {% for msg in contact_msgs %}
        <li class="list-group-item">
          <div class="d-flex justify-content-between">
            <strong>{{ msg.user.nickname }} ({{ msg.user.username }})</strong>
            <small class="text-muted">{{ msg.timestamp.strftime('%Y-%m-%d %H:%M') }}</small>
          </div>
          <div class="mt-2">
            <strong>件名:</strong> {{ msg.subject }}<br>
            <strong>内容:</strong>
            <p>{{ msg.body.replace('\n','<br>')|safe }}</p>
          </div>

          <div class="text-end mt-2">
            <form action="{{ url_for('restore_message', msg_id=msg.id) }}" method="post" onsubmit="return confirm('このメッセージを復元しますか？');">
              <button type="submit" class="btn btn-success btn-sm">復元する</button>
            </form>
          </div>
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <p class="text-muted">削除されたお問い合わせはありません。</p>
  {% endif %}
</div>
{% endblock %}